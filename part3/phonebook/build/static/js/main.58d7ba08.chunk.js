(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{22:function(e,n,t){},42:function(e,n,t){"use strict";t.r(n);var c=t(16),r=t.n(c),u=t(17),o=t(3),i=t(2),s=(t(22),t(0)),a=function(e){var n=e.person,t=e.handleDelete;return Object(s.jsxs)("div",{children:[Object(s.jsxs)("span",{children:[" ",n.name]}),Object(s.jsxs)("span",{children:[" ",n.number]}),Object(s.jsxs)("span",{children:[" ",Object(s.jsx)("button",{onClick:function(){return t(n.id)},children:"Delete"})," "]})]})},d=function(e){var n=e.filter,t=e.filtered,c=e.persons,r=e.handleDelete;return Object(s.jsx)("div",{children:""===n?c.map((function(e,n){return Object(s.jsx)(a,{person:e,handleDelete:r},n)})):t.map((function(e,n){return Object(s.jsx)(a,{person:e,handleDelete:r},n)}))})},l=function(e){var n=e.message,t=e.type;return null===n?null:Object(s.jsx)("div",{className:t,children:n})},f=t(5),j=t.n(f),b="/api/persons",h=function(){return j.a.get(b).then((function(e){return e.data}))},m=function(e){return j.a.post(b,e).then((function(e){return e.data}))},O=function(e){return j.a.delete("".concat(b,"/").concat(e)).then((function(e){return e.data}))},p=function(e,n){return j.a.put("".concat(b,"/").concat(e),n).then((function(e){return e.data}))},v=function(){var e=Object(i.useState)([]),n=Object(o.a)(e,2),t=n[0],c=n[1],r=Object(i.useState)(""),a=Object(o.a)(r,2),f=a[0],j=a[1],b=Object(i.useState)(""),v=Object(o.a)(b,2),x=v[0],w=v[1],g=Object(i.useState)(""),y=Object(o.a)(g,2),D=y[0],k=y[1],S=Object(i.useState)(""),C=Object(o.a)(S,2),T=C[0],E=C[1],I=Object(i.useState)(null),J=Object(o.a)(I,2),L=J[0],N=J[1];Object(i.useEffect)((function(){return h().then((function(e){return c(e)}))}),[]);return Object(s.jsxs)("div",{children:[Object(s.jsx)(l,{message:(null===L||void 0===L?void 0:L.success)||(null===L||void 0===L?void 0:L.error),type:L?L.type:"null"}),Object(s.jsx)("h2",{children:"Phonebook"}),Object(s.jsxs)("div",{children:["filter shown with: ",Object(s.jsx)("input",{onChange:function(e){k(e.target.value);var n=t.filter((function(e){return e.name.toLowerCase().includes(D.toLowerCase())}));E(n)}})]}),Object(s.jsxs)("form",{onSubmit:function(e){e.preventDefault();var n=Object(u.a)(t),r={name:f,number:x};if(n.some((function(e){return e.name===f})))return function(e){var n=e.name,r=e.number;if(window.confirm("".concat(n," is already added to phonebook. Replace the old number with a new one"))){var u=t.find((function(e){return e.name===n}));p(u.id,{name:n,number:r}).then((function(e){c(t.map((function(n){return n.id!==u.id?n:e}))),N({success:"".concat(n," was updated"),type:"success"}),setTimeout((function(){N(null)}),4e3)})).catch((function(){N({success:"Information of ".concat(n," has already been removed from server"),type:"error"}),c(t.filter((function(e){return e.id!==u.id}))),setTimeout((function(){N(null)}),4e3)}))}else console.log("nao trocou")}(r);m(r).then((function(e){return c(n.concat(e))})),N({success:"Added ".concat(r.name),type:"success"}),setTimeout((function(){N(null)}),4e3)},children:[Object(s.jsxs)("div",{children:["name: ",Object(s.jsx)("input",{onChange:function(e){return j(e.target.value)}})]}),Object(s.jsxs)("div",{children:["number: ",Object(s.jsx)("input",{onChange:function(e){return w(e.target.value)}})]}),Object(s.jsx)("div",{children:Object(s.jsx)("button",{type:"submit",children:"add"})})]}),Object(s.jsx)("h2",{children:"Numbers"}),Object(s.jsx)(d,{filter:D,filtered:T,persons:t,handleDelete:function(e){var n=t.find((function(n){return n.id===e}));if(window.confirm("Delete ".concat(n.name,"?")))return N({success:"".concat(n.name," was deleted"),type:"success"}),setTimeout((function(){N(null)}),4e3),void O(n.id).then((function(){var n=t.filter((function(n){return n.id!==e}));c(n)}))}})]})};r.a.render(Object(s.jsx)(v,{}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.58d7ba08.chunk.js.map